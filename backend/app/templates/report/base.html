<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Raport Fotowoltaiczny — Soolevo</title>
    <style>{{ css_content | safe }}</style>
</head>

<body>

    {# ── Element niewidoczny — przekazuje datę do CSS string() dla stopki @page ── #}
    <span class="pdf-generation-date" aria-hidden="true">{{ generation_date }}</span>

    {# ════════════════════════════════════════════════════════════════════════
       STRONA 1: DASHBOARD (Hero + S0 + S1)
       Kompaktowy układ, aby wszystko zmieściło się na jednej stronie A4.
    ════════════════════════════════════════════════════════════════════════ #}
    
    <div class="dashboard-page" style="page-break-after: always;">

        {# 1. HERO / COVER SECTION (Skompresowana wysokość) #}
        <div class="cover-hero avoid-break" style="
            background: linear-gradient(135deg, var(--c-primary) 0%, var(--c-accent) 100%);
            border-radius: 0 0 14px 14px;
            overflow: hidden;
            margin-bottom: 10px; /* Mniejszy margines dolny */
            color: white;
            padding: 16px 20px; /* Zmniejszony padding (było 24px) */
        ">
            {# Logo i Tytuł #}
            <div style="margin-bottom: 14px;"> <!-- Zmniejszony odstęp -->
                <div class="cover-logo" style="font-size:12pt; font-weight:900; margin-bottom:8px; letter-spacing:-0.02em;">
                    ☀ Soolevo<span style="opacity:0.7;">.com</span>
                </div>
                <div class="cover-title" style="font-size:20pt; font-weight:900; margin:0 0 4px; line-height:1.1;">
                    Raport Fotowoltaiczny
                </div>
                <div class="cover-subtitle" style="color:#BFD9ED; font-size:9pt; margin:0; line-height:1.4;">
                    Pełna analiza opłacalności instalacji PV
  
                </div>
            </div>


            {# Pasek 4 kluczowych statystyk (Brak zaokrągleń, mniejsza wysokość) #}
            <div style="
                display: grid;
                grid-template-columns: repeat(4, 1fr);
                background: rgba(0,0,0,0.15);
                border: 1px solid rgba(255,255,255,0.14);
                border-radius: 0; /* USUNIĘTE ZAOKRĄGLENIE */
            ">
                {# 1. Zużycie roczne #}
                <div class="hero-stat" style="padding:10px 14px; border-right:1px solid rgba(255,255,255,0.14);">
                    <div class="hero-stat-label" style="font-size:7pt; text-transform:uppercase; opacity:0.7; margin-bottom:2px;">Zużycie roczne</div>
                    <div class="hero-stat-value" style="font-size:11pt; font-weight:700;">
                        {% if data.annual_consumption_kwh %}
                            {{ data.annual_consumption_kwh | round | int | format_num }} kWh
                        {% else %}—{% endif %}
                    </div>
                </div>

                {# 2. Moc systemu #}
                <div class="hero-stat" style="padding:10px 14px; border-right:1px solid rgba(255,255,255,0.14);">
                    <div class="hero-stat-label" style="font-size:7pt; text-transform:uppercase; opacity:0.7; margin-bottom:2px;">Moc systemu (Std)</div>
                    <div class="hero-stat-value" style="font-size:11pt; font-weight:700;">
                        {% if standard and standard.total_power_kwp %}
                            {{ "%.2f" | format(standard.total_power_kwp) }} kWp
                        {% else %}—{% endif %}
                    </div>
                </div>

                {# 3. Koszt instalacji #}
                <div class="hero-stat" style="padding:10px 14px; border-right:1px solid rgba(255,255,255,0.14);">
                    <div class="hero-stat-label" style="font-size:7pt; text-transform:uppercase; opacity:0.7; margin-bottom:2px;">Koszt instalacji</div>
                    <div class="hero-stat-value" style="font-size:11pt; font-weight:700;">
                        {% if standard and standard.pv_cost_gross_pln %}
                            {{ standard.pv_cost_gross_pln | format_pln }}
                        {% else %}—{% endif %}
                    </div>
                </div>

                {# 4. Zwrot inwestycji #}
                <div class="hero-stat" style="padding:10px 14px;">
                    <div class="hero-stat-label" style="font-size:7pt; text-transform:uppercase; opacity:0.7; margin-bottom:2px;">Zwrot inwestycji</div>
                    <div class="hero-stat-value" style="font-size:11pt; font-weight:700;">
                        {% if standard and standard.pv_payback_years %}
                            ok. {{ standard.pv_payback_years | round(1) }} lat
                        {% else %}—{% endif %}
                    </div>
                </div>
            </div>

        </div>{# /cover-hero #}

        {# 2. S0 - DANE WEJŚCIOWE #}
        <div class="page-section avoid-break" style="margin-bottom: 14px;">
            {% include "report/s0_inputs.html" %}
        </div>

        {# 3. S1 - WERDYKT #}
        <div class="page-section avoid-break">
            {% include "report/s1_verdict.html" %}
        </div>

    </div>{# /dashboard-page #}


    {# ════════════════════════════════════════════════════════════════════════
       STRONA 2+: SZCZEGÓŁY ANALIZY
    ════════════════════════════════════════════════════════════════════════ #}

    {# S4 — Porównanie wariantów #}
    <div class="page-section">
        {% include "report/s4_alternatives.html" %}
    </div>

    <div class="page-break"></div>

    {# S3 — Wykresy #}
    <div class="page-section">
        {% include "report/s3_charts.html" %}
    </div>

    <div class="page-break"></div>

    {# S5 — Ostrzeżenia #}
    {% if warnings and warnings | length > 0 %}
    <div class="page-section">
        {% include "report/s5_warnings.html" %}
    </div>
    <div class="page-break"></div>
    {% endif %}

    {# S6 — Dotacje #}
    <div class="page-section">
        {% include "report/s6_subsidies.html" %}
    </div>

    <div class="page-break"></div>

    {# S7 — Przewodnik #}
    <div class="page-section">
        {% include "report/s7_guide.html" %}
    </div>

    <div class="page-break"></div>

    {# S8 — Następne kroki #}
    <div class="page-section">
        {% include "report/s8_next_steps.html" %}
    </div>

    {# S9 — Zastrzeżenia #}
    <div class="page-section" style="margin-top: 20px;">
        {% include "report/s9_disclaimer.html" %}
    </div>

    {# Stopka #}
    <div class="report-footer-block avoid-break">
        <div class="report-footer-brand">☀ Soolevo</div>
        <div class="report-footer-meta">
            Wygenerowano {{ generation_date }}<br>
            Raport fotowoltaiczny v{{ version }}
        </div>
    </div>

</body>
</html>
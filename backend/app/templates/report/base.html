<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Raport Fotowoltaiczny — Soolevo</title>
    <style>{{ css_content | safe }}</style>
</head>

<body>

    {# ── Element niewidoczny — przekazuje datę do CSS string() dla stopki @page ── #}
    <span class="pdf-generation-date" aria-hidden="true">{{ generation_date }}</span>

    {# ════════════════════════════════════════════════════════════════════════
       OKŁADKA (strona 1)
       Celowo poza .page-section — zajmuje pełną stronę bez marginesów @page.
       @page :first usuwa stopkę/nagłówek z tej strony.
    ════════════════════════════════════════════════════════════════════════ #}
    <div class="cover-page">

        {# Hero banner — ciemne tło, białe litery #}
        <div class="cover-hero">

            {# Logo #}
            <div class="cover-logo">☀ Soolevo<span>.com</span></div>

            {# Tytuł #}
            <div class="cover-title">Raport<br>Fotowoltaiczny</div>
            <div class="cover-subtitle">
                Pełna analiza opłacalności instalacji PV
                {% if standard and standard.total_power_kwp %}
                    &nbsp;·&nbsp; System {{ "%.1f"|format(standard.total_power_kwp) }} kWp
                {% endif %}
            </div>

 
                {# 4 statystyki kontekstowe #}
            <div style="
                display: grid;
                grid-template-columns: repeat(4, 1fr);
                border-top: 1px solid rgba(255,255,255,0.14);
            ">
                {# Zużycie roczne #}
                <div class="hero-stat" style="border-right:1px solid rgba(255,255,255,0.14);">
                    <div class="hero-stat-label">Zużycie roczne</div>
                    <div class="hero-stat-value">
                        {% if data.annual_consumption_kwh %}
                            {{ data.annual_consumption_kwh | round | int | format_num }} kWh
                        {% else %}—{% endif %}
                    </div>
                </div>

                {# Moc systemu #}
                <div class="hero-stat" style="border-right:1px solid rgba(255,255,255,0.14);">
                    <div class="hero-stat-label">Moc systemu (Std)</div>
                    <div class="hero-stat-value">
                        {% if standard and standard.total_power_kwp %}
                            {{ "%.2f" | format(standard.total_power_kwp) }} kWp
                        {% else %}—{% endif %}
                    </div>
                </div>

                {# Koszt instalacji #}
                <div class="hero-stat" style="border-right:1px solid rgba(255,255,255,0.14);">
                    <div class="hero-stat-label">Koszt instalacji</div>
                    <div class="hero-stat-value">
                        {% if standard and standard.pv_cost_gross_pln %}
                            {{ standard.pv_cost_gross_pln | format_pln }}
                        {% else %}—{% endif %}
                    </div>
                </div>

                {# Zwrot #}
                <div class="hero-stat">
                    <div class="hero-stat-label">Zwrot inwestycji</div>
                    <div class="hero-stat-value">
                        {% if standard and standard.pv_payback_years %}
                            ok. {{ standard.pv_payback_years | round(1) }} lat
                        {% else %}—{% endif %}
                    </div>
                </div>
            </div>

        </div>{# /cover-hero #}



    </div>{# /cover-page #}


    {# ════════════════════════════════════════════════════════════════════════
       STRONA 2+: WŁAŚCIWA TREŚĆ RAPORTU
       Od tej strony aktywują się nagłówki/stopki z @page.
    ════════════════════════════════════════════════════════════════════════ #}

    {# S0 — Dane wejściowe + S1 — Werdykt + S2 — Scenariusz główny #}
    <div class="page-section">
        {% include "report/s0_inputs.html" %}
        {% include "report/s1_verdict.html" %}
        {% include "report/s2_main_scenario.html" %}
    </div>

    {# S3 — Wykresy energetyczne (naturalnie dołącza, bez page-break przed) #}
    <div class="page-section">
        {% include "report/s3_charts.html" %}
    </div>

    <div class="page-break"></div>

    {# S4 — Porównanie wariantów #}
    <div class="page-section">
        {% include "report/s4_alternatives.html" %}
    </div>

    {# S5 — Ostrzeżenia (warunkowo) #}
    {% if warnings and warnings | length > 0 %}
    <div class="page-section" style="margin-top: 20px;">
        {% include "report/s5_warnings.html" %}
    </div>
    {% endif %}

    <div class="page-break"></div>

    {# S6 — Dotacje i dofinansowania #}
    <div class="page-section">
        {% include "report/s6_subsidies.html" %}
    </div>

    <div class="page-break"></div>

    {# S7 — Przewodnik po procesie zakupu #}
    <div class="page-section">
        {% include "report/s7_guide.html" %}
    </div>

    <div class="page-break"></div>

    {# S8 — Następne kroki #}
    <div class="page-section">
        {% include "report/s8_next_steps.html" %}
    </div>

    {# S9 — Zastrzeżenia prawne + stopka wewnętrzna #}
    <div class="page-section" style="margin-top: 20px;">
        {% include "report/s9_disclaimer.html" %}
    </div>

    {# Stopka wewnątrz treści — ostatnia strona #}
    <div class="report-footer-block avoid-break">
        <div class="report-footer-brand">☀ Soolevo</div>
        <div class="report-footer-meta">
            Wygenerowano {{ generation_date }}<br>
            Raport fotowoltaiczny v{{ version }}
        </div>
    </div>

</body>
</html>